{"filter":false,"title":"domain_posts.py","tooltip":"/multiple_interactors_sample/gyaan/interactors/domain_posts.py","undoManager":{"mark":-1,"position":-1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":61,"column":0},"action":"remove","lines":["\"\"\"","Created on 11/06/20","","@author: revanth","\"\"\"","from gyaan.exceptions.exceptions import UserNotDomainMember, DomainDoesNotExist","from gyaan.interactors.presenters.presenter_interface import PresenterInterface","from gyaan.interactors.storages.storage_interface import StorageInterface","","","class DomainPostsInteractor:","","    def __init__(self, storage: StorageInterface):","        self.storage = storage","","    def get_domain_posts_wrapper(self, user_id: int, domain_id: int,","                                 offset: int, limit: int,","                                 presenter: PresenterInterface):","","        try:","            return self._get_domain_posts_response(","                user_id=user_id,","                domain_id=domain_id,","                offset=offset,","                limit=limit,","                presenter=presenter","            )","        except UserNotDomainMember:","            presenter.raise_user_not_domain_member_exception()","        except DomainDoesNotExist:","            presenter.raise_domain_does_not_exist_exception()","","    def _get_domain_posts_response(self, user_id: int, domain_id: int,","                                   offset: int, limit: int,","                                   presenter: PresenterInterface):","        posts_complete_details_dtos = self.get_domain_posts(","            user_id=user_id,","            domain_id=domain_id,","            offset=offset,","            limit=limit","        )","        return presenter.get_domain_posts_response(posts_complete_details_dtos)","","    def get_domain_posts(self, user_id: int, domain_id: int,","                         offset: int, limit: int):","        self.storage.is_valid_domain_id(domain_id)","","        is_user_domain_follower = self.storage.is_user_following_domain(","            user_id=user_id,","            domain_id=domain_id","        )","","        if not is_user_domain_follower:","            raise UserNotDomainMember","","        post_ids = self.storage.get_domain_post_ids(domain_id, offset, limit)","","        from gyaan.interactors.get_posts import GetPosts","        get_post_interactor = GetPosts(storage=self.storage)","","        return get_post_interactor.get_posts(post_ids=post_ids)",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["c"]}]]},"ace":{"folds":[],"scrolltop":934.5,"scrollleft":0,"selection":{"start":{"row":57,"column":56},"end":{"row":57,"column":56},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":6,"state":"start","mode":"ace/mode/python"}},"timestamp":1592470509576,"hash":"dfe81a339b11e8aa7c2caae520d235135fb02a5c"}