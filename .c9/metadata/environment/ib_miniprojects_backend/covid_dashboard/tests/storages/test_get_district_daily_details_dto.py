{"filter":false,"title":"test_get_district_daily_details_dto.py","tooltip":"/ib_miniprojects_backend/covid_dashboard/tests/storages/test_get_district_daily_details_dto.py","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":108,"column":51},"action":"remove","lines":["import pytest","import datetime","","from covid_dashboard.models import *","from covid_dashboard.interactors.storages.dtos import *","from covid_dashboard.storages.state_storage_implementation import StorageImplementation","","","@pytest.mark.django_db","def test_get_state_daily_details_dto_when_only_some_ditricts_have_cases_and_other_have_no_cases_returns_state_total_cases_dto_with_zero_cases_for_districts_has_no_cases(post_cases):","    till_date = \"2020-05-20\"","    district_total_cases_dtos = [","           DistrictTotalCasesDto(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","            ),","            DistrictTotalCasesDto(","               district_name=\"Kurnool\",","               district_id=2,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            )","        ]","","    expected_output = StateTotalCasesDto(","               state_name=\"AndhraPradesh\",","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","               districts=district_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    state_total_cases_dto = sql_storage.get_state_daily_details_dto(","        date=till_date","    )","","    assert expected_output == state_total_cases_dto","","","@pytest.mark.django_db","def test_get_state_daily_details_dto_when_cases_posted_on_same_date_for_different_mandals_returns_state_total_cases_dto(kadapa_cases):","    till_date = \"2020-05-20\"","    district_total_cases_dtos = [","           DistrictTotalCasesDto(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=20,","               total_recovered_cases=4,","               total_deaths=2,","            )","        ]","","    expected_output = StateTotalCasesDto(","               state_name=\"AndhraPradesh\",","               total_confirmed_cases=20,","               total_recovered_cases=4,","               total_deaths=2,","               districts=district_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    state_total_cases_dto = sql_storage.get_state_daily_details_dto(","        date=till_date","    )","","    assert expected_output == state_total_cases_dto","","","","","@pytest.mark.django_db","def test_get_state_daily_details_dto_when_state_have_no_cases_returns_state_total_cases_dto_with_zero_cases(create_mandals):","    till_date = datetime.datetime.now().today()","    district_total_cases_dtos = [","           DistrictTotalCasesDto(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            ),","            DistrictTotalCasesDto(","               district_name=\"Kurnool\",","               district_id=2,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            )","        ]","","    expected_output = StateTotalCasesDto(","               state_name=\"AndhraPradesh\",","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","               districts=district_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    state_total_cases_dto = sql_storage.get_state_daily_details_dto(","        date=till_date","    )","","    assert expected_output == state_total_cases_dto"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":126,"column":54},"action":"insert","lines":["import pytest","import datetime","","from covid_dashboard.models import *","from covid_dashboard.interactors.storages.dtos import *","from covid_dashboard.storages.district_storage_implementation import StorageImplementation","","","@pytest.mark.django_db","def test_get_district_cumulative_details_dto_returns_district_total_cases_dto(","    kadapa_mandals_post_cases","    ):","    #arrange","    till_date = datetime.datetime.now().today()","    district_id = 1","    mandal_total_cases_dtos = [","           MandalTotalCasesDto(","               mandal_name=\"Rayachoty\",","               mandal_id=1,","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","            ),","            MandalTotalCasesDto(","               mandal_name=\"Gaaliveedu\",","               mandal_id=2,","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","            )","        ]","","    expected_output = DistrictTotalCasesDtos(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=20,","               total_recovered_cases=4,","               total_deaths=2,","               mandals=mandal_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    district_total_cases_dto = sql_storage.get_district_cumulative_details_dto(","        till_date=till_date, district_id=district_id","    )","","    assert expected_output == district_total_cases_dto","","","","","@pytest.mark.django_db","def test_get_district_cumulative_details_dto_when_only_some_ditricts_have_cases_and_other_have_no_cases_returns_district_total_cases_dto_with_zero_cases_for_mandals_has_no_cases(rayachoty_cases):","    #arrange","    till_date = datetime.datetime.now().today()","    district_id = 1","    mandal_total_cases_dtos = [","           MandalTotalCasesDto(","               mandal_name=\"Rayachoty\",","               mandal_id=1,","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","            ),","            MandalTotalCasesDto(","               mandal_name=\"Gaaliveedu\",","               mandal_id=2,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            )","        ]","","    expected_output = DistrictTotalCasesDtos(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=10,","               total_recovered_cases=2,","               total_deaths=1,","               mandals=mandal_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    district_total_cases_dto = sql_storage.get_district_cumulative_details_dto(","        till_date=till_date, district_id=district_id)","","    assert expected_output == district_total_cases_dto","","@pytest.mark.django_db","def test_get_district_cumulative_details_dto_when_district_have_no_cases_returns_district_total_cases_dto_with_zero_cases(create_kadapa_mandals):","    #arrange","    till_date = datetime.datetime.now().today()","    district_id = 1","    mandal_total_cases_dtos = [","           MandalTotalCasesDto(","               mandal_name=\"Rayachoty\",","               mandal_id=1,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            ),","            MandalTotalCasesDto(","               mandal_name=\"Gaaliveedu\",","               mandal_id=2,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","            )","        ]","","    expected_output = DistrictTotalCasesDtos(","               district_name=\"Kadapa\",","               district_id=1,","               total_confirmed_cases=0,","               total_recovered_cases=0,","               total_deaths=0,","               mandals=mandal_total_cases_dtos","        )","    sql_storage = StorageImplementation()","","    #act","    district_total_cases_dto = sql_storage.get_district_cumulative_details_dto(","        till_date=till_date, district_id=district_id","    )","","    #assert","    assert expected_output == district_total_cases_dto"],"id":3}],[{"start":{"row":9,"column":22},"end":{"row":9,"column":32},"action":"remove","lines":["cumulative"],"id":4},{"start":{"row":9,"column":22},"end":{"row":9,"column":27},"action":"insert","lines":["daily"]},{"start":{"row":42,"column":56},"end":{"row":42,"column":66},"action":"remove","lines":["cumulative"]},{"start":{"row":42,"column":56},"end":{"row":42,"column":61},"action":"insert","lines":["daily"]},{"start":{"row":52,"column":22},"end":{"row":52,"column":32},"action":"remove","lines":["cumulative"]},{"start":{"row":52,"column":22},"end":{"row":52,"column":27},"action":"insert","lines":["daily"]},{"start":{"row":83,"column":56},"end":{"row":83,"column":66},"action":"remove","lines":["cumulative"]},{"start":{"row":83,"column":56},"end":{"row":83,"column":61},"action":"insert","lines":["daily"]},{"start":{"row":89,"column":22},"end":{"row":89,"column":32},"action":"remove","lines":["cumulative"]},{"start":{"row":89,"column":22},"end":{"row":89,"column":27},"action":"insert","lines":["daily"]},{"start":{"row":121,"column":56},"end":{"row":121,"column":66},"action":"remove","lines":["cumulative"]},{"start":{"row":121,"column":56},"end":{"row":121,"column":61},"action":"insert","lines":["daily"]}],[{"start":{"row":13,"column":16},"end":{"row":13,"column":47},"action":"remove","lines":["datetime.datetime.now().today()"],"id":5}],[{"start":{"row":10,"column":10},"end":{"row":10,"column":24},"action":"remove","lines":["_mandals_post_"],"id":6}],[{"start":{"row":13,"column":16},"end":{"row":13,"column":18},"action":"insert","lines":["\"\""],"id":7}],[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"insert","lines":["2"],"id":8},{"start":{"row":13,"column":18},"end":{"row":13,"column":19},"action":"insert","lines":["0"]},{"start":{"row":13,"column":19},"end":{"row":13,"column":20},"action":"insert","lines":["2"]},{"start":{"row":13,"column":20},"end":{"row":13,"column":21},"action":"insert","lines":["0"]},{"start":{"row":13,"column":21},"end":{"row":13,"column":22},"action":"insert","lines":["-"]},{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"insert","lines":["0"]}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["5"],"id":9},{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"insert","lines":["-"]},{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"insert","lines":["2"]},{"start":{"row":13,"column":26},"end":{"row":13,"column":27},"action":"insert","lines":["0"]}],[{"start":{"row":43,"column":12},"end":{"row":43,"column":13},"action":"remove","lines":["_"],"id":10},{"start":{"row":43,"column":11},"end":{"row":43,"column":12},"action":"remove","lines":["l"]},{"start":{"row":43,"column":10},"end":{"row":43,"column":11},"action":"remove","lines":["l"]},{"start":{"row":43,"column":9},"end":{"row":43,"column":10},"action":"remove","lines":["i"]},{"start":{"row":43,"column":8},"end":{"row":43,"column":9},"action":"remove","lines":["t"]}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":0},"action":"remove","lines":["",""],"id":11},{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":82,"column":8},"end":{"row":82,"column":27},"action":"remove","lines":["till_date=till_date"],"id":14},{"start":{"row":82,"column":8},"end":{"row":82,"column":22},"action":"insert","lines":["date=till_date"]},{"start":{"row":120,"column":8},"end":{"row":120,"column":27},"action":"remove","lines":["till_date=till_date"]},{"start":{"row":120,"column":8},"end":{"row":120,"column":22},"action":"insert","lines":["date=till_date"]}],[{"start":{"row":10,"column":10},"end":{"row":10,"column":11},"action":"insert","lines":["_"],"id":15}],[{"start":{"row":52,"column":16},"end":{"row":52,"column":47},"action":"remove","lines":["datetime.datetime.now().today()"],"id":16}],[{"start":{"row":52,"column":16},"end":{"row":52,"column":18},"action":"insert","lines":["\"\""],"id":17}],[{"start":{"row":52,"column":17},"end":{"row":52,"column":18},"action":"insert","lines":["2"],"id":18},{"start":{"row":52,"column":18},"end":{"row":52,"column":19},"action":"insert","lines":["0"]}],[{"start":{"row":52,"column":19},"end":{"row":52,"column":20},"action":"insert","lines":["2"],"id":19},{"start":{"row":52,"column":20},"end":{"row":52,"column":21},"action":"insert","lines":["0"]},{"start":{"row":52,"column":21},"end":{"row":52,"column":22},"action":"insert","lines":["-"]},{"start":{"row":52,"column":22},"end":{"row":52,"column":23},"action":"insert","lines":["0"]},{"start":{"row":52,"column":23},"end":{"row":52,"column":24},"action":"insert","lines":["5"]}],[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"insert","lines":["-"],"id":20},{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"insert","lines":["2"]},{"start":{"row":52,"column":26},"end":{"row":52,"column":27},"action":"insert","lines":["0"]}]]},"ace":{"folds":[],"scrolltop":865,"scrollleft":0,"selection":{"start":{"row":55,"column":31},"end":{"row":55,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":42,"state":"start","mode":"ace/mode/python"}},"timestamp":1591271834460,"hash":"8d1b751b9a5cdf9e993b9bef95e482d60f8f356a"}